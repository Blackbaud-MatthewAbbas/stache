#!/usr/bin/env node

/**
* Why such a small file?  In almost all cases, this is simply a shim for grunt.
* We kept grunt in order to better support TFS / Visual Studio development (surprising right?)
**/

'use strict';

var path = require('path');
var shell = require('child_process').exec;
var args = process.argv.slice(2).join(':');
var pathGruntFile = path.normalize(__dirname + '/../');
var pathProject = path.normalize(process.cwd() + '/');

// Run the global gruntfile.js, convert parameters to grunt commands separated by colons
shell('grunt --cwd=' + pathProject + ' ' + args, { cwd: pathGruntFile }, function (error, stdout, stderr) {
  if (error) {
    console.log(error.stack);
    console.log('Error code: ' + error.code);
    console.log('Signal received: ' + error.signal);
  }
  console.log(stdout);
  console.log(stderr);
});