<!DOCTYPE html>
<html lang="en" class="">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>RENXT Developer</title>

    <!-- build:css ../../assets/css/app.css -->
    <link rel="stylesheet" href="../../assets/css/app.css">
    <!-- endbuild -->

    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->

  </head>
  <body class="bb-omnibar-height-padding ">

    <div id="top"></div>

    <div class="nav-wrap">
      <div class="container">
        <div class="col-sm-12">
          <ul class="nav-items">


      <li >
        <a href="http://localhost:4000/">Home</a>
      </li>



      <li class="selected">
        <a href="http://localhost:4000/tutorials/">Tutorials</a>
      </li>



      <li >
        <a href="http://localhost:4000/guide/">Developer Guide</a>
      </li>



      <li >
        <a href="http://localhost:4000/resources/">Resources</a>
      </li>



      <li >
        <a href="https://bbapidev.portal.azure-api.net/">Developer Portal</a>
      </li>




</ul>

        </div>
      </div>
    </div>


    <div class="content">
  <div class="container">
    <div class="row">
      <div class="col-sm-12">
        <div class="row">
  <div class="col-sm-3">
    <div class="sidebar">

<ul class="nav nav-stacked nav-sidebar">










            <li>
              <a href="http://localhost:4000/tutorials/getting-started/">
                Getting Started
              </a>
            </li>



            <li class="current">
              <a href="http://localhost:4000/tutorials/auth/">
                Web API Authorization
              </a>


  <ul class="nav">

      <li>
        <a href="#step-1-sign-up-for-your-blackbaud-account" class="smooth-scroll">
          Step 1 - Sign up for your Blackbaud account
        </a>
      </li>

      <li>
        <a href="#step-2-register-your-application" class="smooth-scroll">
          Step 2 - Register your application
        </a>
      </li>

      <li>
        <a href="#step-3-getting-your-client-id-and-secret-key" class="smooth-scroll">
          Step 3 - Getting your Client ID and Secret Key
        </a>
      </li>

      <li>
        <a href="#step-4-create-an-renxt-user-account" class="smooth-scroll">
          Step 4 - Create an RENXT user account
        </a>
      </li>

      <li>
        <a href="#step-5-preparing-your-environment" class="smooth-scroll">
          Step 5 - Preparing Your Environment
        </a>
      </li>

      <li>
        <a href="#step-6-creating-the-project" class="smooth-scroll">
          Step 6 - Creating the Project
        </a>
      </li>

      <li>
        <a href="#step-7-prompting-the-user-to-login" class="smooth-scroll">
          Step 7 - Prompting the User to Login
        </a>
      </li>

      <li>
        <a href="#step-8-providing-the-application-credentials" class="smooth-scroll">
          Step 8 - Providing the Application Credentials
        </a>
      </li>

      <li>
        <a href="#step-9-calling-the-blackbaud-authorization-service" class="smooth-scroll">
          Step 9 - Calling the Blackbaud Authorization Service
        </a>
      </li>

      <li>
        <a href="#step-10-running-the-application" class="smooth-scroll">
          Step 10 - Running the application
        </a>
      </li>

  </ul>



            </li>















</ul>

    </div>
  </div>
  <div class="col-sm-9">
    <p class="alert alert-danger">Draft: This content is a work in progress.  For a list of dependencies and To Do list, click the bottom right info icon.</p>

<!--
## TO DO

-->
<h1 id="web-api-authorization-tutorial">Web API Authorization Tutorial</h1>
<p class="alert alert-info">Note that by using Blackbaud developer tools, you accept our <a href="http://localhost:4000/legal/" >Developer Terms of Use</a>. </p>

<p>Through the RENXT Web API, external applications can retrieve RENXT content such as constituent data and events. If an application wants to access user-related data through the Web API, it must get the user’s authorization to access that data.</p>
<p>This tutorial is based around the creation of a simple application using ASP.NET MVC.   We will show you how to:</p>
<ul>
<li>Register your application with Blackbaud.</li>
<li>Authenticate a user</li>
<li>Get authorization to access the user’s data for a specific tenant</li>
<li>Retrieve data from a RENXT Web API&#39;s  <code>/Constituent</code> endpoint</li>
</ul>
<p>The authorization flow we will use in this tutorial is the <strong>Authorization Code</strong> flow. See <a href="" >Web API Authorization</a>.    This flow first gets a code from the Blackbaud Authorization Service, then exchanges that code for an access token. The code-to-token exchange requires a <strong>Client Secret</strong>, and for security is done through direct server-to-server communication. </p>
<h2 id="step-1-sign-up-for-your-blackbaud-account">Step 1 - Sign up for your Blackbaud account</h2>
<p>To be able to use the Web API as a developer, the first thing you will need is a Blackbaud user account.  To get one, simply <a href="https://bbapidev.portal.azure-api.net/signup/" target="_blank" >sign up</a>.</p>
<p>Once you have your own user account, read and accept the latest <a href="http://localhost:4000/legal/" target="_blank" >Developer Terms of Use</a> to complete the set-up of your account.</p>
<h2 id="step-2-register-your-application">Step 2 - Register your application</h2>
<p>If you haven&#39;t already done so, you will need to <a href="http://localhost:4000/guide/#registering-your-app" target="_blank" >register your application</a> with our Blackbaud Authorization Service.  You will need to provide your app name, description, web site address, and your URI redirects.  </p>
<h2 id="step-3-getting-your-client-id-and-secret-key">Step 3 - Getting your Client ID and Secret Key</h2>
<p>When you register an application on your account, two credentials are created for you. You will need them to make calls from your application to the RENXT Web API. You can see the credentials on the application’s details page:</p>
<p><img src="http://placehold.it/800x300" alt="Ipsum Image"></p>
<ul>
<li><strong>Client ID</strong> is the unique identifier for your application. It does not need to be stored securely and usually it does not need to be changed. (If for some reason you do need to change the client ID, you will need to delete your application from your account and register it again.)</li>
<li><strong>Client Secret</strong> is the key that you will need to pass in secure calls to the Blackbaud Authorization Service and RENXT Web API services.</li>
</ul>
<p class="alert alert-warning">Important! Keep the <b>Client Secret</b> secure! Regenerate your <b>Client Secret</b> if you suspect it has been compromised! You should never expose the secret in your code.  You should take special care to never store the secret on the client, such as a native mobile or browser-based apps.</p>

<h2 id="step-4-create-an-renxt-user-account">Step 4 - Create an RENXT user account</h2>
<p>Before you can access an end user&#39;s data for a specific tenant via the Web API, you&#39;ll need a valid OAuth 2.0 access token. The access token represents an RENXT user&#39;s authorization for your application to access protected RENXT API resources.  The first step to obtain an OAuth 2.0 access token is to create a trial RENXT user account.</p>
<p><img src="http://placehold.it/800x300" alt="Ipsum Image"></p>
<h2 id="step-5-preparing-your-environment">Step 5 - Preparing Your Environment</h2>
<p>Now that you have registered our application, we need to set up your environment. We’ll describe how to do that now.</p>
<p>Because we are creating a server-side application in this tutorial, we will need the help of an appropriate software platform. For this, we will use .NET MVC 4.</p>
<h2 id="step-6-creating-the-project">Step 6 - Creating the Project</h2>
<p>Let&#39;s clone the Web API Authorization tutorial project from <a href="https://github.com/blackbaud-community/RENXT-WebAPI-Authorization/" target="_blank">GitHub</a>.  This code serves as a starter project for working through the OAuth 2.0 Authorization Code flow.</p>
<h2 id="step-7-prompting-the-user-to-login">Step 7 - Prompting the User to Login</h2>
<p>Let’s examine the code of the Web API Authorization tutorial project.</p>
<p>Open the file xyz. This file provides a simple interface that prompts the user to login:</p>
sample code goes here<h2 id="step-8-providing-the-application-credentials">Step 8 - Providing the Application Credentials</h2>
<p>The file called app.cs contains the main code of our application. Open it in an editor and you will find that it contains code for:</p>
<ul>
<li>Creating a server on your local machine,</li>
<li>Handling the user’s login request,</li>
<li>Specifying the scopes for which authorization is sought,</li>
<li>Performing the exchange of the authorization code for an access token,</li>
<li>Calling the Web API endpoint.</li>
</ul>
<p>There are some lines of code in this file containing the client ID, secret key and redirect URI:</p>
string my_client_id = &#39;CLIENT_ID&#39;; // Your client id
string my_secret = &#39;CLIENT_SECRET&#39;; // Your secret
string redirect_uri = &#39;REDIRECT_URI&#39;; // Your redirect uri<p>They contain sample values, so if you want to try the app out we recommend that you replace them with the values that you were given when you registered your app. </p>
<p>You can also see in this file the data scopes that we are going to ask the user for authorization to access:</p>
string scopes = &#39;constituent-read&#39;;<p>That means that the app will be requesting access to read all constituents and sub resources for a particular tenant.  See  <a href="http://localhost:4000/guide/#using_scopes" target="_blank" >Using Scopes</a> for more information.</p>
<h2 id="step-9-calling-the-blackbaud-authorization-service">Step 9 - Calling the Blackbaud Authorization Service</h2>
<p>The first call is the service’s <code>/authorize</code> endpoint, passing to it the client ID, scopes, and redirect URI. This is the call that starts the process of authenticating to user and gets the user’s authorization to access data.</p>
<p>The second call is to the Blackbaud Authorization Service’s <code>/token</code> endpoint, passing to it the authorization code returned by the first call and the client secret key. This second call returns an access token and also a refresh token.</p>
<p class="alert alert-warning">Note that our app.cs machinations cannot be seen from a web browser. This is important because we never want to expose our application’s Client Secret to a user. Make sure that you safeguard your application’s Client Secret at all times. Be aware, for example, that if you commit your code to a public repository like GitHub you will need to remove the secret key from your code before doing so.</p>

<p>For a better understanding of the Accounts Service’s endpoints and the parameters passed in each call, see the full description of the Authorization Code Flow in our <a href="" >Web API Authorization</a>.</p>
<p>After both calls have been completed (and the user has authorized access), the application will have the <strong>access_token</strong> it needs to retrieve the user data from the Web API.</p>
<p>The third call, in the code managing requests to <code>/refresh_token</code>, a refresh token is sent to <code>/token</code>. This will generate a new access token that we can issue when the previous has expired.</p>
<h2 id="step-10-running-the-application">Step 10 - Running the application</h2>
<p>ipsum lorem</p>
<p><img src="http://placehold.it/800x300" alt="Ipsum Image"></p>

  </div>
</div>

  </div>
</div><p>  </div>
</div></p>


    <!-- Omnibar Placeholder -->
    <div id="omnibar"></div>

    <!-- build:js ../../assets/js/lib.js -->
    <script src="../../assets/vendor/jquery/dist/jquery.min.js"></script>
    <script src="../../assets/vendor/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="../../assets/vendor/easyXDM/easyXDM.min.js"></script>
    <script src="../../assets/vendor/holderjs/holder.min.js"></script>
    <script src="../../assets/vendor/stellar/jquery.stellar.min.js"></script>
    <!-- endbuild -->

    <script src="//signin.blackbaud.com/omnibar.min.js"></script>

    <!-- build:js ../../assets/js/app.js -->
    <script src="../../assets/js/omnibar-init.js"></script>
    <script src="../../assets/js/app.js"></script>
    <!-- endbuild -->



  </body>
</html>
